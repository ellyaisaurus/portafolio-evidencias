<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planes y Precios | ¬°Qu√© Bot√≥n!</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/globals.css">
</head>
<body class="d-flex flex-column min-vh-100">

    <!-- NAVBAR (Unificado con Inicio) -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
            <div class="container">
                <a class="navbar-brand fw-bold fs-3" href="inicio.html">
                    <span class="text-primary">¬°Qu√©</span> Bot√≥n!
                </a>
                
                <div class="d-flex align-items-center order-lg-3 ms-lg-3 gap-2">
                    <!-- Bot√≥n Carrito -->
                    <button class="btn btn-outline-primary position-relative border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-bag" viewBox="0 0 16 16">
                            <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"/>
                        </svg>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger d-none" id="cart-count">0</span>
                    </button>
                    
                    <!-- Bot√≥n Ayuda (Igual que Inicio) -->
                    <button class="btn btn-outline-primary d-none d-lg-block" onclick="window.elian.toggleInterface(true)">
                        Ayuda
                    </button>

                    <!-- Toggler M√≥vil -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon" style="background-image: url('data:image/svg+xml;charset=utf8,%3Csvg viewBox=\'0 0 32 32\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath stroke=\'rgba(31, 41, 55, 1)\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-miterlimit=\'10\' d=\'M4 8h24M4 16h24M4 24h24\'/%3E%3C/svg%3E');"></span>
                    </button>
                </div>

                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav align-items-center">
                        <li class="nav-item"><a class="nav-link" href="inicio.html">Inicio</a></li>
                        <li class="nav-item"><a class="nav-link" href="soluciones.html">Soluciones</a></li>
                        <li class="nav-item"><a class="nav-link" href="tecnologia.html">Tecnolog√≠a</a></li>
                        <li class="nav-item"><a class="nav-link active fw-bold text-primary" href="planes.html">Planes</a></li>
                    </ul>
                    <!-- Bot√≥n m√≥vil extra -->
                    <div class="d-lg-none mt-3">
                         <button class="btn btn-outline-primary w-100" onclick="window.elian.toggleInterface(true)">
                            Hablar con Elian
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main style="margin-top: 100px;">
        
        <!-- HERO -->
        <section class="container py-5 text-center">
            <h1 class="display-3 fw-bold mb-3">Inversi√≥n <span class="text-gradient">Inteligente</span></h1>
            <p class="lead text-muted">Paquetes listos para usar o arquitectura a medida.</p>
        </section>

        <!-- SECCI√ìN DE CARDS EST√ÅTICAS -->
        <section class="container mb-5">
            <div class="row g-4 align-items-stretch">
                <!-- 1. STARTER PLAN -->
                <div class="col-lg-4">
                    <div class="card-custom h-100 d-flex flex-column border-0 shadow-sm hover-up">
                        <div class="mb-4">
                            <h5 class="fw-bold text-muted">Starter Kit</h5>
                            <h2 class="display-4 fw-bold mb-0">$49<span class="fs-6 text-muted fw-normal">/mes</span></h2>
                        </div>
                        <ul class="list-unstyled mb-4 flex-grow-1 text-muted">
                            <li class="mb-2">‚úÖ <strong>1,000</strong> Mensajes/mes</li>
                            <li class="mb-2">‚úÖ Chatbot basado en Reglas</li>
                            <li class="mb-2">‚úÖ Widget Web Personalizable</li>
                            <li class="mb-2 opacity-50">‚ùå Sin IA Generativa</li>
                        </ul>
                        <button class="btn btn-outline-primary w-100 mt-auto rounded-pill" 
                                onclick="addToCart('static', 'Starter Kit', 49, '1,000 mensajes ‚Ä¢ Reglas B√°sicas')">
                            Agregar al Carrito
                        </button>
                    </div>
                </div>

                <!-- 2. BUSINESS PLAN -->
                <div class="col-lg-4">
                    <div class="card-custom h-100 d-flex flex-column border border-2 border-primary position-relative shadow-lg transform-scale">
                        <div class="position-absolute top-0 start-50 translate-middle badge rounded-pill bg-primary px-3 py-2 shadow">
                            RECOMENDADO
                        </div>
                        <div class="mb-4 pt-3">
                            <h5 class="fw-bold text-primary">Business AI</h5>
                            <h2 class="display-4 fw-bold mb-0">$199<span class="fs-6 text-muted fw-normal">/mes</span></h2>
                        </div>
                        <ul class="list-unstyled mb-4 flex-grow-1 text-dark">
                            <li class="mb-2">‚úÖ <strong>10,000</strong> Mensajes/mes</li>
                            <li class="mb-2">‚úÖ <strong>GPT-4 Turbo</strong> Integrado</li>
                            <li class="mb-2">‚úÖ Conexi√≥n a Base de Datos</li>
                            <li class="mb-2">‚úÖ Dashboard de Anal√≠tica</li>
                        </ul>
                        <button class="btn btn-primary w-100 mt-auto rounded-pill shadow-sm"
                                onclick="addToCart('static', 'Business AI', 199, '10k Mensajes ‚Ä¢ GPT-4 Turbo')">
                            Agregar al Carrito
                        </button>
                    </div>
                </div>

                <!-- 3. ENTERPRISE PLAN -->
                <div class="col-lg-4">
                    <div class="card-custom h-100 d-flex flex-column border-0 shadow-sm hover-up">
                        <div class="mb-4">
                            <h5 class="fw-bold text-muted">Enterprise</h5>
                            <h2 class="display-4 fw-bold mb-0">Custom</h2>
                        </div>
                        <ul class="list-unstyled mb-4 flex-grow-1 text-muted">
                            <li class="mb-2">‚úÖ Mensajes Ilimitados</li>
                            <li class="mb-2">‚úÖ Entrenamiento en Servidor Privado</li>
                            <li class="mb-2">‚úÖ SLA 99.99% Garantizado</li>
                            <li class="mb-2">‚úÖ Account Manager Dedicado</li>
                        </ul>
                        <button class="btn btn-outline-dark w-100 mt-auto rounded-pill" 
                                onclick="window.elian.toggleInterface(true)">
                            Contactar Ventas
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCI√ìN DE COTIZADOR (CUSTOM) -->
        <section class="bg-white py-5 border-top" id="cotizador-section">
            <div class="container">
                <div class="text-center mb-5">
                    <span class="text-primary fw-bold text-uppercase small">Personalizaci√≥n Total</span>
                    <h2 class="fw-bold mt-2">Arma tu arquitectura</h2>
                    <p class="text-muted">Calcula el costo exacto seg√∫n tus necesidades t√©cnicas.</p>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div class="card-custom p-4 p-lg-5 shadow">
                            <div class="row g-5">
                                <div class="col-lg-7">
                                    <h5 class="fw-bold mb-3">Configuraci√≥n</h5>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Modelo</label>
                                        <div class="btn-group w-100" role="group">
                                            <input type="radio" class="btn-check calc-trigger" name="botModel" id="m1" value="reglas">
                                            <label class="btn btn-outline-secondary" for="m1">Reglas</label>
                                            <input type="radio" class="btn-check calc-trigger" name="botModel" id="m2" value="nlp">
                                            <label class="btn btn-outline-secondary" for="m2">NLP</label>
                                            <input type="radio" class="btn-check calc-trigger" name="botModel" id="m3" value="gpt4" checked>
                                            <label class="btn btn-outline-primary" for="m3">GPT-4</label>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label d-flex justify-content-between">Volumen <span id="display-volumen">5000</span></label>
                                        <input type="range" class="form-range calc-trigger" min="1000" max="50000" step="1000" value="5000" id="volumenRange">
                                    </div>

                                    <div class="d-flex gap-3 flex-wrap">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input calc-trigger" type="checkbox" id="check-whatsapp">
                                            <label class="form-check-label" for="check-whatsapp">WhatsApp (+$50)</label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input calc-trigger" type="checkbox" id="check-instagram">
                                            <label class="form-check-label" for="check-instagram">Instagram (+$30)</label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input calc-trigger" type="checkbox" id="check-crm">
                                            <label class="form-check-label" for="check-crm">CRM Sync (+$40)</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-5">
                                    <div class="bg-dark text-white p-4 rounded-3 h-100 text-center d-flex flex-column justify-content-center">
                                        <h2 class="display-3 fw-bold" id="precio-final-display">$0</h2>
                                        <button id="btn-add-custom" class="btn btn-light text-primary fw-bold w-100 mt-3 rounded-pill" onclick="addCustomToCart()">
                                            Agregar al Carrito
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- TOAST (Notificaci√≥n) -->
    <div class="toast-container-custom">
        <div id="liveToast" class="toast toast-custom align-items-center border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body fw-bold">
                    <!-- Mensaje din√°mico -->
                </div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <!-- OFFCANVAS CARRITO -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart">
        <div class="offcanvas-header bg-soft">
            <h5 class="offcanvas-title fw-bold text-primary">Tu Bolsa</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body d-flex flex-column">
            <div id="cart-items-container" class="flex-grow-1 overflow-auto"></div>
            <div class="border-top pt-3">
                <div class="d-flex justify-content-between mb-3">
                    <span class="h5">Total</span>
                    <span class="h4 fw-bold text-primary" id="cart-total">$0</span>
                </div>
                <button class="btn btn-primary w-100 py-3 rounded-pill fw-bold" onclick="openPaymentModal()">
                    Ir a Pagar
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL 1: PAGO MEJORADO -->
    <div class="modal fade" id="modalPayment" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg rounded-3">
                <div class="modal-header border-bottom-0 pb-0">
                    <h5 class="modal-title fw-bold">Pago Seguro</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="text-center mb-4">
                        <small class="text-muted">Total a pagar</small>
                        <h2 class="fw-bold text-primary" id="payment-total">$0</h2>
                    </div>

                    <form id="payment-form" onsubmit="processPayment(event)">
                        <!-- Email con validaci√≥n espec√≠fica -->
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Correo Electr√≥nico</label>
                            <input type="text" class="form-control form-control-payment" id="cardEmail" placeholder="tu@empresa.com">
                            <div class="invalid-feedback" id="email-error-msg">Por favor ingresa un correo v√°lido (ej: usuario@dominio.com).</div>
                        </div>
                        
                        <div class="credit-card-form mb-4 bg-light p-3 rounded-3 border">
                            <div class="mb-3">
                                <label class="form-label small fw-bold text-muted">Tarjeta</label>
                                <div class="position-relative">
                                    <!-- ID inputCardNumber para JS -->
                                    <input type="text" class="form-control form-control-payment bg-white" id="inputCardNumber" placeholder="0000 0000 0000 0000" maxlength="19" required>
                                    <div class="position-absolute top-50 end-0 translate-middle-y me-2 text-muted">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-credit-card" viewBox="0 0 16 16">
                                            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v1h14V4a1 1 0 0 0-1-1H2zm13 4H1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V7z"/>
                                            <path d="M2 10a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-2">
                                <div class="col-6">
                                    <label class="form-label small fw-bold text-muted">Exp</label>
                                    <!-- ID inputExpiry para JS -->
                                    <input type="text" class="form-control form-control-payment bg-white" id="inputExpiry" placeholder="MM/YY" maxlength="5" required>
                                </div>
                                <div class="col-6">
                                    <label class="form-label small fw-bold text-muted">CVC</label>
                                    <input type="password" class="form-control form-control-payment bg-white" placeholder="123" maxlength="3" required>
                                </div>
                            </div>
                        </div>

                        <button type="submit" id="btn-pay-now" class="btn btn-primary w-100 py-3 rounded-pill fw-bold shadow-sm">
                            Pagar Ahora
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL 2: √âXITO + EMAIL -->
    <div class="modal fade" id="modalSuccess" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-success text-white border-0">
                    <h5 class="modal-title">¬°Activaci√≥n Exitosa!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4 bg-light">
                    <div class="text-center mb-4">
                        <div class="fs-1">üöÄ</div>
                        <h4 class="fw-bold">Bienvenido a bordo</h4>
                        <p class="text-muted">Hemos enviado las credenciales a <strong id="success-email-user" class="text-dark"></strong>.</p>
                    </div>

                    <div class="email-preview shadow-sm mx-auto" style="max-width: 600px;">
                        <div class="d-flex justify-content-between border-bottom pb-2 mb-3">
                            <span class="fw-bold">De:</span> <span>activaciones@queboton.com</span>
                        </div>
                        <p>Tu cuenta ha sido aprovisionada. Aqu√≠ tienes tu API Key de producci√≥n:</p>
                        
                        <div class="code-snippet-email mb-3">
                            API_KEY: <span class="text-warning" id="generated-api-key">...</span>
                        </div>

                        <p><strong>Instrucciones:</strong> Copia este c√≥digo en tu sitio web:</p>
                        
                        <div class="code-snippet-email">
&lt;script src="https://cdn.queboton.com/sdk/loader.js"&gt;&lt;/script&gt;
&lt;script&gt;
  QueBoton.init({
    key: "<span class="text-warning">API_KEY_ARRIBA</span>"
  });
&lt;/script&gt;
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER (Unificado con Inicio) -->
    <footer class="pt-5 pb-4">
        <div class="container">
            <div class="row g-5">
                <div class="col-12 col-lg-4">
                    <a class="navbar-brand fw-bold fs-4 text-dark" href="#">
                        <span class="text-primary">¬°Qu√©</span> Bot√≥n!
                    </a>
                    <p class="text-muted mt-3 pe-4">
                        Redefiniendo la interacci√≥n humano-m√°quina a trav√©s de interfaces conversacionales elegantes y eficientes.
                    </p>
                </div>
                <div class="col-6 col-lg-3">
                    <h5>Navegaci√≥n</h5>
                    <ul class="list-unstyled d-flex flex-column gap-2">
                        <li><a href="inicio.html" class="text-decoration-none">Inicio</a></li>
                        <li><a href="soluciones.html" class="text-decoration-none">Soluciones</a></li>
                        <li><a href="tecnologia.html" class="text-decoration-none">Tecnolog√≠a</a></li>
                        <li><a href="planes.html" class="text-decoration-none">Planes</a></li>
                    </ul>
                </div>
                <!-- Columna Legal ELIMINADA -->
                <div class="col-12 col-lg-5">
                    <h5>Mantente actualizado</h5>
                    <p class="text-muted small">Recibe las √∫ltimas novedades sobre IA y automatizaci√≥n.</p>
                    <form id="newsletter-form" class="d-flex gap-2">
                        <input type="email" class="form-control" placeholder="nombre@empresa.com" required>
                        <button type="submit" class="btn btn-primary">Suscribir</button>
                    </form>
                </div>
            </div>
            <div class="border-top mt-5 pt-4 d-flex flex-column flex-md-row justify-content-between align-items-center">
                <small class="text-muted">&copy; 2025 ¬°Qu√© Bot√≥n! - Todos los derechos reservados.</small>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/agent.js"></script>
    <script src="js/cotizador.js"></script>
</body>
</html>